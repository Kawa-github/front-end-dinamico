<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplicativo de Piadas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>
<style>
  *{
    margin: 0;
    padding: 0;
  }
</style>
<body>
  <!-- <div class="container">
    <div id="div-joke d-flex justify-content-center">
        <form action="">
        </form>
      </div>
  </div> -->

<div class="container">
  <div class="d-flex justify-content-center">
    <div class="card bg-secondary m-5 w-50">
      <form action="">
        <div class="card-body">
          <h5 class="card-title text-center text-white mb-3">Clique no botão para obter uma Piada</h5>
          <input type="text" name="" id="ask" class="form-control mb-2"> 
          <input type="text" name="" id="answer" class="form-control"> 
          <!-- <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p> -->
        </div>
        <div class="d-grid gap-2">
          <button id="btn_search" class="btn btn-primary m-3">Obter Piada</button>
        </div>
        <button class="btn btn-outline-primary m-3 float-end">Próxima Piada</button>
      </form>
    </div>
  </div>
</div>

</body>
<script>

    let url = "https://jokeapi.dev/joke/Any?lang=en"
    let div_joke = document.querySelector("#div_joke")
    let pergunta = document.querySelector("#ask")
    let resposta = document.querySelector("#answer")
    let btn_obter = document.querySelector("#btn_search")

    async function getJoke() {
      try {
        const response = await fetch(url);
        const data = await response.json();
        // console.log(data.setup)
        // console.log(data.delivery)
        // console.log(data)

        pergunta.value = data.setup
        resposta.value = data.delivery
        
        btn_obter.disabled = true
        return data;
      } catch (error) {
        throw new Error("Não foi possível obter uma piada.");
      }
    }

    // function showJoke(joke){
    //     pergunta.value = joke.setup
    //     resposta.value = joke.delivery
    // }

    
    
    btn_obter.addEventListener("click", getJoke())

    // btn_obter.addEventListener("click", async () => {
    //     try {
    //       const joke = await getJoke();
    //       showJoke(joke)
    //     } catch (error) {
    //       console.log(error.message);
    //     } 
    //   });
    
</script>
</html>